<% new = f.object && f.object.id.blank? %>
<%= text_f f, :name, :disabled => !new if show_vm_name? %>
<%= select_f f, :flavor_ref, compute_resource.flavors, :id, :name, {}, :label => _('Flavor') %>
<%
   arch ||= nil ; os ||= nil
   images = possible_images(compute_resource, arch, os)
   snapshots = compute_resource.possible_snapshots
%>
<div id='image_selection'>
  <%= select_f f, :image_ref, images, :uuid, :name,
               { :include_blank => (images.empty? || images.size == 1) ? false : _('Please select an image') },
               { :disabled => images.empty?, :label => _("Image") } %>
</div>
<%= checkbox_f f, :clone_from_snapshot, {:label => "Clone from snapshot", :help_inline => _("Use snapshot instead of image"),:id => 'use_snapshot_for_vm'}, "true", "false" %>
<%= select_f f, :snapshot_id, snapshots, :id, :name,
             { :include_blank => (snapshots.empty? || snapshots.size == 1) ? false : _('Please select a snapshot') },
             { :disabled => snapshots.empty?, :label => _("Snapsot") } %>
<%= select_f f, :tenant_id, compute_resource.tenants, :id, :name, {}, :label => _('Tenant') %>

<%= select_f f, :security_groups, compute_resource.security_groups, :name, :name, {}, :label => _("Security group")  %>
<%= select_f f, :nics, compute_resource.internal_networks, :id, :name,
             {}, { :label => _('Internal network'), :multiple => true } %>
<%= selectable_f f, :network, compute_resource.address_pools, { include_blank: 'None' }, { :label => _("Floating IP network") } %>

<%= checkbox_f f, :boot_from_volume, {:label => "Boot from volume", :help_inline => _("Create new boot volume from image")}, "true", "false" %>

<%= text_f f, :size_gb, { :label => _("New Boot volume size (GB)"), :help_inline => _("Defaults to image size if left blank") } %>
